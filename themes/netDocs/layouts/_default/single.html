{{ define "menu"}}

{{ partial "menu/menu-sectiontree" . }}

{{ end }}


{{ define "main" }}
{{ partial "old" . }}
<article class="markdown">
  <h1>  {{- .Title -}} </h1>
  {{ $.Scratch.Set "content" (slice) -}}
  {{- range where (where .Site.Pages ".Params.version" .Page.Params.version) ".Params.product" .Page.Params.product -}}
          {{ .Scratch.Set "content" (.Scratch.Get "content" | append (dict "title" .Page.Params.title "permalink" .Permalink "version" .Page.Params.version "product" .Page.Params.product "content"  (.Content | plainify)))}}
  {{end}}

  {{ $.Scratch.Get "content" -}}
</article>

{{ end }}

{{ define "toc" }}

{{ $showToC := default (default true .Site.Params.BookShowToC) .Params.bookshowtoc }}
  {{ if or ($showToC) (.Page.TableOfContents) }}

    {{ partial "toc" . }}

{{ end }}

{{ end }}